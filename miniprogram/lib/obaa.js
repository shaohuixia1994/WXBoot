"use strict";function obaa(r,e,t){var o=function(r,e,t){var o=this,n=[];obaa.isArray(r)&&(0===r.length&&o.track(r),o.mock(r)),r&&"object"===(void 0===r?"undefined":_typeof(r))&&0===Object.keys(r).length&&o.track(r);for(var a in r)r.hasOwnProperty(a)&&(t?obaa.isArray(e)&&obaa.isInArray(e,a)?(n.push(a),o.watch(r,a)):obaa.isString(e)&&a==e&&(n.push(a),o.watch(r,a)):(n.push(a),o.watch(r,a)));o.target=r,o.propertyChangedHandler||(o.propertyChangedHandler=[]);var i=t||e;o.propertyChangedHandler.push({all:!t,propChanged:i,eventPropArr:n})};return o.prototype={onPropertyChanged:function(r,e,t,o,n){if(e!==t&&(!nan(e)||!nan(t))&&this.propertyChangedHandler)for(var a=obaa._getRootName(r,n),i=0,s=this.propertyChangedHandler.length;i<s;i++){var p=this.propertyChangedHandler[i];(p.all||obaa.isInArray(p.eventPropArr,a)||0===a.indexOf("Array-"))&&p.propChanged.call(this.target,r,e,t,n)}0!==r.indexOf("Array-")&&"object"===(void 0===e?"undefined":_typeof(e))&&this.watch(o,r,o.$observeProps.$observerPath)},mock:function(r){var e=this;obaa.methods.forEach(function(t){r[t]=function(){var r=Array.prototype.slice.call(this,0),o=Array.prototype[t].apply(this,Array.prototype.slice.call(arguments));if(new RegExp("\\b"+t+"\\b").test(obaa.triggerStr)){for(var n in this)this.hasOwnProperty(n)&&!obaa.isFunction(this[n])&&e.watch(this,n,this.$observeProps.$observerPath);e.onPropertyChanged("Array-"+t,this,r,this,this.$observeProps.$observerPath)}return o},r["pure"+t.substring(0,1).toUpperCase()+t.substring(1)]=function(){return Array.prototype[t].apply(this,Array.prototype.slice.call(arguments))}})},watch:function(r,e,t){if("$observeProps"!==e&&"$observer"!==e&&!obaa.isFunction(r[e])){r.$observeProps||Object.defineProperty(r,"$observeProps",{configurable:!0,enumerable:!1,writable:!0,value:{}}),r.$observeProps.$observerPath=void 0!==t?t:"#";var o=this,n=r.$observeProps[e]=r[e];if(Object.defineProperty(r,e,{get:function(){return this.$observeProps[e]},set:function(t){var n=this.$observeProps[e];this.$observeProps[e]=t,o.onPropertyChanged(e,t,n,this,r.$observeProps.$observerPath)}}),"object"==(void 0===n?"undefined":_typeof(n))){obaa.isArray(n)&&(this.mock(n),0===n.length&&this.track(n,e,t)),n&&0===Object.keys(n).length&&this.track(n,e,t);for(var a in n)n.hasOwnProperty(a)&&this.watch(n,a,r.$observeProps.$observerPath+"-"+e)}}},track:function(r,e,t){r.$observeProps||(Object.defineProperty(r,"$observeProps",{configurable:!0,enumerable:!1,writable:!0,value:{}}),r.$observeProps.$observerPath=void 0!==t&&null!==t?t+"-"+e:void 0!==e&&null!==e?"#-"+e:"#")}},new o(r,e,t)}function nan(r){return"number"==typeof r&&isNaN(r)}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};exports.default=obaa,obaa.methods=["concat","copyWithin","entries","every","fill","filter","find","findIndex","forEach","includes","indexOf","join","keys","lastIndexOf","map","pop","push","reduce","reduceRight","reverse","shift","slice","some","sort","splice","toLocaleString","toString","unshift","values","size"],obaa.triggerStr=["concat","copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift","size"].join(","),obaa.isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)},obaa.isString=function(r){return"string"==typeof r},obaa.isInArray=function(r,e){for(var t=r.length;--t>-1;)if(e===r[t])return!0;return!1},obaa.isFunction=function(r){return"[object Function]"==Object.prototype.toString.call(r)},obaa._getRootName=function(r,e){return"#"===e?r:e.split("-")[1]},obaa.add=function(r,e){r.$observer.watch(r,e)},obaa.set=function(r,e,t,o){if(void 0===r[e]){(r.$observer||o).watch(r,e,r.$observeProps.$observerPath)}r[e]=t},Array.prototype.size=function(r){this.length=r};